{% extends 'analytics/dashboard.html' %}
{% load static %}
{% block base_head %}
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">

<!-- Fontawesome CSS -->
<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' />

<!-- jquery-confirm CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.css">


<!-- Custom Stripe Styling -->
<link rel="stylesheet" href="{% static 'css/stripe-custom-style.css' %}">
{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">


	<!-- <hr/> -->
	<p>Recent Total: ${{ this_week.recent_data.total__sum }}</p>

</div>
<h3>Today's sales </h3>
<table class="table table-bordered table-hover">
	<thead>
		<tr>
			<th scope="col">NÂ°</th>
			<th scope="col">Order id</th>
			<th scope="col">Order total</th>
			<th scope="col">Order updated</th>
			<th scope="col">Order create</th>
			<th scope="col">by user </th>
			<th scope="col">Recent Total:</th>
		</tr>
	</thead>
	<tbody>

		{% for order in this_week.recent|slice:":5" %}
		<tr>
			<th scope="row">{{forloop.counter}}</th>
			<td>{{ order.order_id }}</td>
			<td>${{ order.total }}</td>
			<td>{{ order.updated|timesince }} ago</td>
			<td>{{ order.pretty_date_order}}</td>
			<td>{{ order.billing_profile}}</td>
			{% if forloop.counter is 1 %}
			<td>	${{ this_week.recent_data.total__sum }}</td>
			{% endif %}

		</tr>
		{% endfor %}





	</tbody>
</table>
<canvas class='cfe-render-chart' id="thisWeekSales" data-type='week' width="900" height="380"></canvas>
<br/><br/>

<h3>Previous 4 weeks</h3>
<table class="table">
	<thead>
		<tr>
			<th scope="col">#</th>
			<th scope="col">Orders Total</th>
			<th scope="col">Shipped Total</th>
			<th scope="col">Paid Totals</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<th scope="row">1</th>
			<td>${{ last_four_weeks.recent_data.total__sum }}</td>
			<td>{% if last_four_weeks.shipped_data.total__sum %}${{ last_four_weeks.shipped_data.total__sum }} {% endif %}</td>
			<td>${{ last_four_weeks.paid_data.total__sum }}</td>
		</tr>

	</tbody>
</table>
<br/><br/>

<canvas class='cfe-render-chart' id="fourWeekSales" data-type='4weeks' width="900" height="380"></canvas>


{% block js_head %}


<!--slim is missing ajax -->
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

<!-- Stripe JS -->
<script src="https://js.stripe.com/v3/"></script>


<!-- jquery-confirm JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.0/jquery-confirm.min.js"></script>

<!-- js Render -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jsrender/0.9.88/jsrender.min.js'></script>
<!-- {% include 'base/js_templates.html' %} -->


<!-- Chart.js -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js'></script>

<!-- Django Secure AJAX JS -->
<script src='{% static "js/csrf.ajax.js" %}'></script>

<!-- eCommerce Sales Data JS -->
<script src='{% static "js/ecommerce.sales.js" %}'></script>

<!-- eCommerce Custom JS -->
<script src='{% static "js/ecommerce.js" %}'></script>

<!-- eCommerce Main JS -->
<script src='{% static "js/ecommerce.main.js" %}'></script>
{% endblock js_head %}
{% endblock %}
